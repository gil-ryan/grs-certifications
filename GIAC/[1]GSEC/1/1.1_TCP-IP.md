# TCP/IP Essentials

## Review of the OSI, TCP/IP Model

| Number | Name | Description |
|:------:|:----:|:-----------:|
|7|Application|To accomplish a networked user task|
|6|Presentation|Expressing and translating data formats|
|5|Session|To accommodate multiple session connections|
|4|Transport|Connecting multiple programs on the same system|
|3|Network|Facilitate multihop communications across potentially different link networks|
|2|Link|Communication across a single link including media access control|
|1|Physical|Specifies connectors, data rates, and encoding bits|

## IPv4/IPv6/ICMP/ICMPv6

### IPv4 v. IPv6

| v4 | v6 |
|:-:|:-:|
|2^32 address space|2^128 address space|
|Dotted decimal format|Hexadecimal notation|
|DHCP dynamic addressing|SLAAC DHCPv6|
|Header has 20 bytes and 13 fields|Header has 40 bytes and 8 fields|
|variable header length|fixed header length|
|header options (obsolete)|header extensions|
|header checksum|no header checksum|

###  More v4 - v6

| Version 4 | Version 6 |
|:-:|:-:|
| Packet size: 576 bytes required, fragmentation optional|Packet size: 1280 bytes required without fragmentation|
|Packet fragmentation: Routers and sending hosts|Packet fragmentation: Sending hosts only|
|IPv4 was never designed to be secure|Have native encryption and authentication|
|IPsec optional|IPsec mandatory|
|Non-equal geographical distribution (>50% USA)|No geographical limitations|

## Packet Header

![IPv4 and IPv6 Packet Header](../../../img/v4-v6-packet.png)

## Assigning IPv6 Addresses

There are three methods for assigning IPv6 addresses:

* manual
* stateful autoconfiguration (using DHCPv6 server)
* stateless autoconfiguration (SLAAC)

### stateless autoconfiguration (SLAAC)

### IPv6 Extension Headers

* IPv6 uses distinct types of headers: The regular IPv6 Header and IPv6 Extension Headers
* The extension headers, if there are any, follow the original 8 fiels
* The number of extension headers is not fixed, so the total length of the extension header chain is variable

![IPv4 and IPv6 Packet Header](../../../img/IPv6-ext.png)

### Uses for EH

* Hop-by-hop EH is used to support Jumbo-grams
* destination EH is used in IPv6 mobility
* routing EH is used in IPv6 mobility and source routin
* fragmentation EH is critical
* mobility EH is used in support of Mobile IPv6 service
* authenticaion EH and encapsulating securty payload EH

## ICMP - Internet Control Message Protocol

* since IP in unreliable and doesn't guarantee delivery, ICMP is used as feedback mechanism offering feedback about network problems
* IP doesn't offer a direct method for collecting diagnostic information
* it resides between the _Transport_ and _Network_ layers
* ICMP provides error messages and informational messages

### ICMPv6

The nature of ICMPv6 can provide some security issues'

* most routers and firewall block most settings or ICMP by default
* if blocked, diagnostic tools like ping and traceroute will not work
* there's a number of Tpyee

## Common ICMPv4 Messages

|Name|Type|E/I |Desciption|
|:----:|:----:|:---------:|:-----:|
| Echo Reply|0|I|Ping reply that reutrns data|
||Destination Unreachable|3|E|Unreachable host/protocol|
|Redirect|5|E|Alternate gateway should be used|
|Echo|8|L|Ping request(data option)|
|Time Exceeded|11|E|Resource Exhausted|
|Parameter Problem|12|E|Malformed packet or header|
